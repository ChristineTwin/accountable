# Weekly Report Form — Design Specifications

**Author:** Ian Duggan  
**Purpose:** Defines the user goals, data requirements, layout, validation rules, and workflow for the Weekly Report Entry Form.

---

## 1. User Goals & Context
The Weekly Report Entry form is used by project staff to log the work they completed during the week for one or more funded projects. Each weekly report captures a snapshot of activities, hours worked, and narrative updates that contribute to project progress, funder reporting, and compliance documentation.

Users typically access this form once per week, per project they are assigned to. The form allows them to enter multiple activity items, each representing a distinct task, deliverable, or work session. Each activity item includes the number of hours worked and a brief narrative summary describing what was accomplished.

The primary goals of the user when interacting with this form are to:

1. Select the appropriate project they are reporting on.

2. Record the hours worked for that week.

3. Provide narrative descriptions of the work completed.

4. Submit project information efficiently and accurately.

5. Ensure compliance with funder and internal reporting standards.

This form should minimize manual effort while ensuring that all required information is captured in a structured, consistent format. It serves as the user-facing entry point to populate the weekly_report and w_report_item tables in the database.

## 2. Data Fields and Database Mappings

This section identifies all fields required for the Weekly Report Entry form and maps each field to the appropriate PostgreSQL table and column. The Weekly Report workflow inserts one record into weekly_report and one or more itemized activity records into w_report_item.

### 2.1 Parent Record — weekly_report Table

This table represents the high-level weekly report for a given person and project.
A new row is created each time a user submits a weekly report.

| Form Field          | Description                  | Database Table  | Column       | Notes                                                                  |
| ------------------- | ---------------------------- | --------------- | ------------ | ---------------------------------------------------------------------- |
| **Project**         | Project being reported on    | `weekly_report` | `project_id` | Selected from dropdown populated via `/api/projects`                   |
| **Reporter / User** | Person submitting the report | `weekly_report` | `person_id`  | Pulled automatically from authenticated session (not selectable in UI) |
| **Timestamp**       | Report submission time       | `weekly_report` | `timestamp`  | Auto-generated by database (`DEFAULT CURRENT_TIMESTAMP`)               |

### 2.2 Activity Items — w_report_item Table

Each weekly report contains one or more activity items.
Each item corresponds to a row in w_report_item.


| Form Field                  | Description                         | Database Table  | Column        | Notes                                        |
| --------------------------- | ----------------------------------- | --------------- | ------------- | -------------------------------------------- |
| **Hours Worked**            | Number of hours for this activity   | `w_report_item` | `hours`       | Decimal; must be `> 0`                       |
| **Activity Description**    | Narrative summary of work completed | `w_report_item` | `text`        | Required text field                          |
| **Parent Weekly Report ID** | Link to weekly report               | `w_report_item` | `w_report_id` | Set automatically after parent record insert |

The user should be allowed to add 1-N items, with a button like "Add another activity."

## 3. Form Layout and UX Structure

in progress...
